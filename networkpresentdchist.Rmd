---
title: "presentationDCHS2015"
author: "George Oberle"
date: "October 7, 2015"
output: html_document
---

#Institutionalizing Knowledge in Early Washington D.C.  

Proposal Abstract
In Democracy in America, Alexander de Tocqueville observed that “In democratic countries the science of association is the mother of science; the progress of all the rest depends upon the progress it has made.” Tocqueville noted that Americans formed numerous associations for distinct purposes and whose goals included establishing schools and churches, and spreading knowledge through the publication of information of interest to like-minded citizens.  The residents of the District of Columbia, America’s federal city, sought to create a thriving metropolis crowded with a vibrant and extensive community of scholars. Many hoped a national institution would materialize to promote the expansion of knowledge and learning. This paper explores the purpose and composition of the myriad societies in the early federal city, especially scientific, literary and proto-professional societies, 1815-1850. This paper examines the shared relationships between these groups using computational tools and methods to develop network analysis using society membership lists.

```{r}
#Load tools
library (sp)
library (rgdal)
library (rgeos)
library (maptools)
library (ggmap)
library (ggplot2)
library (mullenMisc)
library (magrittr)
library (stringr)
library (dplyr)
library (RColorBrewer)
library (igraph)
```

##Methods

###Data
Source
American Philosophical Society: http://www.amphilsoc.org/memhist/search

American Academy of Arts and Sciences: Book of Members. http://www.amphilsoc.org/memhist/search

Academy of Natural Sciences: “List of Members and Correspondents of the Academy of Natural Sciences,” *Proceedings of the Academy of Natural Sciences of Philadelphia* 8 (January 1, 1856): 17–38.




```{r}
threelarge = read.csv("~/Desktop/networkspresentation/data/test_APS_AAAS_ANS-1849.csv")

```

Graphing the membership APS/AAAS/ANS
```{r}
#Load the data of the three large national institutions
threelarge = read.csv("~/Desktop/networkspresentation/data/test_APS_AAAS_ANS-1849.csv")

threelarge %>%
  group_by(Year.Elected, Organization) %>%
  summarize(n = n())  %>% 
  ggplot(aes(x=Year.Elected, y= n, color = Organization )) +
  geom_line() +
ggtitle("Annual Elected Members of APS, AAAS, and ANS") + ylab("Total Members Elected") + xlab("Year Elected")

#maybe group by decades?

year <- ggplot(threelarge, aes(x=Year.Elected, fill= Organization ))
year + geom_histogram(position = "dodge", binwidth = 1) +
ggtitle("Annual Elected Members of APS, AAAS and ANS") + ylab("Total Members Elected") + xlab("Year Elected")

threelarge %>%
  filter(Year.Elected ==1840) %>%
  graph.data.frame(directed = FALSE) %>%
  plot(vertex.label = NA)
title("APS, AAAS, ANS Shared Membership 1840")

threelarge %>%
  filter(Year.Elected ==1830) %>%
  graph.data.frame(directed = FALSE) %>%
  plot
title("APS, AAAS, ANS Shared Membership 1830")

```


Graph data frame of the "national" learned societies.
```{r}
threelarge_df <- graph.data.frame(threelarge, directed = FALSE)
plot (threelarge_df)
title("Network Graph of the 'national' Learned Societies", sub = "A network graph of members with name labels",cex.main = 2,   font.main= 4, col.main= "blue", cex.sub = 0.75, font.sub = 3, col.sub = "red")
```

Networks

```{r}
V(threelarge_df)
bipartite.mapping(threelarge_df)
V(threelarge_df)$type <- bipartite.mapping(threelarge_df)$type
is.bipartite(threelarge_df)
plot(threelarge_df, layout = layout.bipartite, vertex.label = NA)
title("National Learned Societies in Early Republic", sub = "A bipartite layout of members and organizations",cex.main = 2,   font.main= 4, col.main= "blue", cex.sub = 0.75, font.sub = 3, col.sub = "red")
```
full_members

we can run our bipartite projection function and use the data_members

```{r}
full_members <- bipartite.projection(threelarge_df)
```


```{r}
plot(full_members$proj2)
title("National Learned Societies", sub = "Just the Organizations",cex.main = 2,   font.main= 4, col.main= "blue", cex.sub = 2, font.sub = 3, col.sub = "red")
```

assign edges
```{r}
E(full_members$proj2)
E(full_members$proj2)$weight
```

Plot but hard to see.
```{r}
plot(full_members$proj2, edge.width = E(full_members$proj2)$weight)
title("Big Three National Learned Societies", sub = "Weighted by Shared Members",cex.main = 2,   font.main= 4, col.main= "blue", cex.sub = 2, font.sub = 3, col.sub = "red")
```

This is the good one to use in paper
```{r}
plot(full_members$proj2, edge.width = E(full_members$proj2)$weight*0.2, layout = layout.fruchterman.reingold(full_members$proj2, 
       weights = E(full_members$proj2)$weight),edge.label.cex=1,vertex.shape="circle",edge.color="red", vertex.size = 25, vertex.color="lightblue", asp=0, margin=0,  vertex.label.dist = 0, vertex.label.cex = .5)
title("National Learned Societies", sub = "Weighted by Shared Members",cex.main = 2,   font.main= 2, col.main= "blue", cex.sub = 2, font.sub = 3, col.sub = "red")  

```

Add Columbian Institute, Columbian Agriculture and Medical Society of the District of Columbia.

```{r}
#Load the data of the the three plus columbian institute
netsoc = read.csv("~/Desktop/networkspresentation/data/networksocieties.csv")
```

Graph data frame of the "national" learned societies.
```{r}
netsoc_df <- graph.data.frame(netsoc, directed = FALSE)
plot (netsoc_df)
title("Network Graph of the 'national' Learned Societies", sub = "A network graph of members with name labels",cex.main = 2,   font.main= 4, col.main= "blue", cex.sub = 0.75, font.sub = 3, col.sub = "red")
```

Networks

```{r}
V(netsoc_df)
bipartite.mapping(netsoc_df)
V(netsoc_df)$type <- bipartite.mapping(netsoc_df)$type
is.bipartite(netsoc_df)
plot(netsoc_df, layout = layout.bipartite, vertex.label = NA)
title("Learned Societies in Early Republic", sub = "A bipartite layout of members and organizations",cex.main = 2,   font.main= 4, col.main= "blue", cex.sub = 0.75, font.sub = 3, col.sub = "red")
```
full_members

we can run our bipartite projection function and use the data_members

```{r}
members_col <- bipartite.projection(netsoc_df)
```


```{r}
plot(members_col$proj2)
title("National Learned Societies", sub = "Just the Organizations",cex.main = 2,   font.main= 4, col.main= "blue", cex.sub = 2, font.sub = 3, col.sub = "red")
```

assign edges
```{r}
E(members_col$proj2)
E(members_col$proj2)$weight
```

Plot but hard to see.Don't use.

plot(members_col$proj2, edge.width = E(members_col$proj2)$weight)
title("Big Three National Learned Societies", sub = "Weighted by Shared Members",cex.main = 2,   font.main= 4, col.main= "blue", cex.sub = 2, font.sub = 3, col.sub = "red")


This is the good one to use in paper
```{r}
plot(members_col$proj2, edge.width = E(members_col$proj2)$weight*0.15, layout = layout.fruchterman.reingold(members_col$proj2, 
       weights = E(members_col$proj2)$weight),edge.label.cex=1,vertex.shape="circle",edge.color="red", vertex.size = 25, vertex.color="lightblue", asp=0, margin=0,  vertex.label.dist = 0, vertex.label.cex = .5)
title("Learned Societies", sub = "Weighted by Shared Members",cex.main = 2,   font.main= 2, col.main= "blue", cex.sub = 2, font.sub = 3, col.sub = "red")  

```


```{r}
#Load the data of the the three plus columbian institute
dc = read.csv("~/Desktop/networkspresentation/data/dc_orgs.csv")
```

Graph data frame of the "national" learned societies.
```{r}
dc_df <- graph.data.frame(dc, directed = FALSE)
plot (dc_df)
title("Network Graph of DC Learned Societies", sub = "A network graph of members with name labels",cex.main = 2,   font.main= 4, col.main= "blue", cex.sub = 0.75, font.sub = 3, col.sub = "red")
```

Networks

```{r}
V(dc_df)
bipartite.mapping(dc_df)
V(dc_df)$type <- bipartite.mapping(dc_df)$type
is.bipartite(dc_df)
plot(dc_df, layout = layout.bipartite, vertex.label = NA)
title("DC Learned Societies", sub = "A bipartite layout of members and organizations",cex.main = 2,   font.main= 4, col.main= "blue", cex.sub = 0.75, font.sub = 3, col.sub = "red")
```
full_members

we can run our bipartite projection function and use the data_members

```{r}
members_dc <- bipartite.projection(dc_df)
```


```{r}
plot(members_dc$proj2)
title("DC Societies", sub = "Just the Organizations",cex.main = 2,   font.main= 4, col.main= "blue", cex.sub = 2, font.sub = 3, col.sub = "red")
```

assign edges
```{r}
E(members_dc$proj2)
E(members_dc$proj2)$weight
```

Plot with DC Societies and Fed Govt 1822
```{r}
plot(members_dc$proj2, edge.width = E(members_dc$proj2), layout = layout.fruchterman.reingold(members_dc$proj2, 
       weights = E(members_dc$proj2)$weight),edge.label.cex=1,vertex.shape="circle",edge.color="red", vertex.size = 25, vertex.color="lightblue", asp=0, margin=0,  vertex.label.dist = 0, vertex.label.cex = .5)
title("DC Learned Societies", sub = "Weighted by Shared Members",cex.main = 2,   font.main= 2, col.main= "blue", cex.sub = 2, font.sub = 3, col.sub = "red")
```

